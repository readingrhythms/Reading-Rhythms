---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import News from '@components/index/News.astro';
import Spotify from '@components/index/Spotify.astro';
import Instagram from '@components/index/Instagram.astro';

const pressItems = [
  {
    type: 'news',
    title: 'The Reading Party Revolution',
    source: 'Business Insider',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757710406/New_York_Times_t4w1id.webp',
    width: '300px',
    height: '280px'
  },
  {
    type: 'news',
    title: 'Silent Reading, Loud Impact',
    source: 'Rolling Stone',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676154/Chapter_3_on_the_Roof_ocldzj.webp',
    width: '280px',
    height: '200px'
  },
  {
    type: 'news',
    title: 'NYC\'s Hottest Reading Trend',
    source: 'Today Show',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757668923/Chapter_10_Maison_Mono_vxiena.webp',
    width: '320px',
    height: '320px'
  },
  {
    type: 'news',
    title: 'Book Clubs Are So Last Year',
    source: 'FOX5 NY',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676204/Readers_FourFiveSix_Bar_wo0bjq.webp',
    width: '270px',
    height: '240px'
  },
  {
    type: 'news',
    title: 'The Future of Reading',
    source: 'The Guardian',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757710406/New_York_Times_t4w1id.webp',
    width: '290px',
    height: '300px'
  },
  {
    type: 'news',
    title: 'Reading Parties Take Manhattan',
    source: 'Thrillist',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676154/Chapter_3_on_the_Roof_ocldzj.webp',
    width: '310px',
    height: '210px'
  },
  {
    type: 'news',
    title: 'Community Through Literature',
    source: 'Forbes',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757668923/Chapter_10_Maison_Mono_vxiena.webp',
    width: '285px',
    height: '290px'
  },
  {
    type: 'news',
    title: 'The Social Reading Movement',
    source: 'CBS News',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676204/Readers_FourFiveSix_Bar_wo0bjq.webp',
    width: '295px',
    height: '220px'
  },
  {
    type: 'news',
    title: 'Books and Beats',
    source: 'NBC New York',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757710406/New_York_Times_t4w1id.webp',
    width: '275px',
    height: '310px'
  },
  {
    type: 'news',
    title: 'Reading Renaissance',
    source: 'TechCrunch',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676154/Chapter_3_on_the_Roof_ocldzj.webp',
    width: '305px',
    height: '250px'
  },
  {
    type: 'news',
    title: 'Literary Social Hours',
    source: 'Washington Post',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757668923/Chapter_10_Maison_Mono_vxiena.webp',
    width: '290px',
    height: '270px'
  },
  {
    type: 'news',
    title: 'The Reading Revolution',
    source: 'London Times',
    href: '#',
    thumb: 'https://res.cloudinary.com/daaznyhsu/image/upload/v1757676204/Readers_FourFiveSix_Bar_wo0bjq.webp',
    width: '280px',
    height: '230px'
  }
];

// Filter out Instagram and Spotify
const newsItems = pressItems.filter(item => item.type === 'news');
---
// Create staggered margin-top values for visual variety
const getStaggeredMargin = (index) => {
  const margins = ['0px', '25px', '-15px', '40px', '-10px', '30px'];
  return margins[index % margins.length];
};

<section class="py-16 lg:py-24 bg-gradient-to-b from-gray-50/30 to-white">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-display text-dark-gray mb-4">
        Press & <span class="bg-gradient-to-r from-jean to-rust bg-clip-text text-transparent">Media</span>
      </h2>
      <p class="text-lg text-dark-gray/70">
        Reading Rhythms in the news
      </p>
    </div>
    
    <div class="relative">
      <!-- Flexible Press Grid -->
      <div id="press-container" class="flex flex-wrap justify-center gap-4 lg:gap-6">
        {newsItems.map((item, index) => (
          <div 
            class={`press-item ${index >= 9 ? 'hidden-press hidden' : ''} transition-all duration-300`}
            style={`width: ${item.width}; height: ${item.height}; min-width: 250px; margin-top: ${getStaggeredMargin(index)};`}
          >
            <News 
              title={item.title}
              source={item.source}
              href={item.href}
              thumb={item.thumb}
            />
          </div>
        ))}
      </div>
      
      <!-- Fade Overlay and See More Button -->
      <div id="fade-overlay" class="relative -mt-20 pt-20 bg-gradient-to-t from-white via-white/90 to-transparent text-center">
        <button 
          id="see-more-press"
          class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-jean to-dark-purple text-white rounded-xl font-bold text-lg hover:shadow-xl hover:shadow-jean/25 transition-all duration-300 hover:-translate-y-1"
        >
          See More Press
        </button>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const seeMoreButton = document.getElementById('see-more-press');
    const fadeOverlay = document.getElementById('fade-overlay');
    const hiddenItems = document.querySelectorAll('.hidden-press');
    
    if (seeMoreButton && fadeOverlay) {
      seeMoreButton.addEventListener('click', () => {
        // Show hidden press items
        hiddenItems.forEach(item => {
          item.classList.remove('hidden');
          item.classList.add('animate-fade-in');
        });
        
        // Hide the fade overlay and button
        fadeOverlay.style.display = 'none';
      });
    }
  });
</script>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .animate-fade-in {
    animation: fade-in 0.5s ease-out forwards;
  }
  
  .press-item {
    flex-shrink: 0;
  }
  
  @media (max-width: 768px) {
    .press-item {
      width: 100% !important;
      min-width: unset !important;
      max-width: 400px;
      height: 200px !important;
    }
  }
</style>